name: Conditional Commit Workflow

on:
    workflow_dispatch:


jobs:
    check_commits:
        runs-on: ubuntu-latest
        outputs:
            new_commits: ${{ steps.commit_check.outputs.new_commits }}
        steps:
            - name: Checkout code
              uses: actions/checkout@v2
            - name: Check for Commits
              id: commit_check
              run: |
                git log  --since="4 minutes ago" --oneline -- foo |wc -l > $GITHUB_OUTPUT

    run_the_build:
      needs: check_commits
      runs-on: ubuntu-latest
      if: needs.check_commits.outputs.new_commits > 0
      steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Run the actual build
        run: |
          echo "THE WORKFLOW GOES BRRRR"

